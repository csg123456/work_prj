## 系统tick定时器优先级
1. 属于硬件优先级
2. 系统systick定时器优先级：默认配置为硬件最低优先级，用于freeRTOS任务调度；

## 硬件中断优先级
1. 属于硬件优先级；
2. 可被freeRTOS管理优先级：
    + 优先级要小于等于configMAX_SYSCALL_INTERRUPT_PRIORITY：默认配置为软件最高优先级，用于API调用，可被freeRTOS管理；
3. 不可被freeRTOS管理优先级：
    + 优先级要大于configMAX_SYSCALL_INTERRUPT_PRIORITY；

## 任务优先级
1. 属于软件优先级；
2. 任务优先级和硬件优先级不是一个维度的，硬件优先级是中断层面的，任务优先级是任务层面的，正常情况下，硬件中断总能打断任务;
3. 特殊情况如下：
    + 任务中调用taskENTER_CRITICAL()：从逻辑层面屏蔽硬件中断(不是禁止硬件中断)，直到调用taskEXIT_CRITICAL()退出临界区；
    + 临界区之间触发了硬件中断，会在退出临界区之后继续触发硬件中断，调用中断服务函数；

```c
// 任务优先级配置如下：
 /* FreeRTOS内核本身(systick)使用的中断优先级 通常是系统中最低的中断优先级 */
#define configKERNEL_INTERRUPT_PRIORITY             (0x7 << 5) //这是给 FreeRTOS 内核直接使用的原始寄存器值。
/* 划分中断安全区，高于此中断（数值小）不用调用API且不可屏蔽，低于此中断（数值大）可安全调用FromISR的API且可被临界区屏蔽 */
#define configMAX_SYSCALL_INTERRUPT_PRIORITY        (0x3 << 5)
/* NVIC中断优先级配置 */
#define NVIC_configKERNEL_INTERRUPT_PRIORITY        (0x7) //这是给厂商 HAL 库（如 ST 的 HAL_NVIC_SetPriority()）使用的逻辑优先级值。
#define NVIC_configMAX_SYSCALL_INTERRUPT_PRIORITY   (0x3)
```

## 软件定时器任务：Tmr Svc
1. 周期执行用户配置的定时任务；
2. 周期执行任务时，会触发软件定时器任务，将软件定时器事件组标识置位；

## vTaskSuspendAll()和taskENTER_CRITICAL()的区别
1. taskENTER_CRITICAL() (临界区) 是禁用中断。它会冻结任务调度和硬件中断，是“硬暂停”。
2. vTaskSuspendAll() (挂起调度器) 是禁用任务切换。它只冻结任务调度，但硬件中断(ISR)会继续正常运行。

## 任务调度机制

1. 这是一个完美的组合，它们三个共同构成了 FreeRTOS 在 Cortex-M 处理器上的“调度核心”。
它们各自扮演着绝对独立、不可替代的角色，像三个齿轮一样精密地啮合在一起：

+ SVC_Handler (服务大门)：一个软件触发的中断。它只在两种情况下被调用：
    - （最常见的）启动调度器时的**“点火”**操作。
    - （在 MPU 或安全模型中）任务需要“提升权限”来调用内核函数时的“服务请求”。
+ SysTick_Handler (心跳/决策者)：一个硬件定时器触发的中断。它周期性地（如 1ms）运行，负责**“计时”，并“决定”**是否需要切换任务（例如 vTaskDelay 到期）。
+ PendSV_Handler (执行者/苦力)：一个软件触发的中断（具有最低优先级）。它是唯一负责**“执行”**上下文切换（保存/加载寄存器）的组件。
- systick中断和PendSv中断优先级(来自于configKERNEL_INTERRUPT_PRIORITY)相同；